/** 使用假資料模擬 AJAX，若是於開發環境，則可以透過 proxy 存取真實 API */

import dayjs from 'dayjs';

const fakeSchedules = {
  '2020-04-26': { available: [{ start: '2020-04-28T14:00:00Z', end: '2020-04-28T16:00:00Z' }, { start: '2020-04-28T23:00:00Z', end: '2020-04-28T23:30:00Z' }, { start: '2020-04-29T00:30:00Z', end: '2020-04-29T01:30:00Z' }, { start: '2020-04-29T02:30:00Z', end: '2020-04-29T03:00:00Z' }, { start: '2020-04-29T16:00:00Z', end: '2020-04-29T17:00:00Z' }, { start: '2020-04-30T00:00:00Z', end: '2020-04-30T02:00:00Z' }, { start: '2020-04-30T13:00:00Z', end: '2020-04-30T14:00:00Z' }, { start: '2020-04-30T17:00:00Z', end: '2020-04-30T18:00:00Z' }, { start: '2020-04-30T23:00:00Z', end: '2020-05-01T00:00:00Z' }, { start: '2020-05-01T02:00:00Z', end: '2020-05-01T04:00:00Z' }, { start: '2020-05-01T15:00:00Z', end: '2020-05-01T15:30:00Z' }, { start: '2020-05-01T16:30:00Z', end: '2020-05-01T17:00:00Z' }, { start: '2020-05-02T02:00:00Z', end: '2020-05-02T02:30:00Z' }, { start: '2020-05-02T16:00:00Z', end: '2020-05-02T17:00:00Z' }], booked: [{ start: '2020-04-28T13:00:00Z', end: '2020-04-28T14:00:00Z' }, { start: '2020-04-28T16:00:00Z', end: '2020-04-28T18:00:00Z' }, { start: '2020-04-28T23:30:00Z', end: '2020-04-29T00:30:00Z' }, { start: '2020-04-29T01:30:00Z', end: '2020-04-29T02:30:00Z' }, { start: '2020-04-29T03:00:00Z', end: '2020-04-29T04:00:00Z' }, { start: '2020-04-29T13:00:00Z', end: '2020-04-29T16:00:00Z' }, { start: '2020-04-29T17:00:00Z', end: '2020-04-29T18:00:00Z' }, { start: '2020-04-30T02:00:00Z', end: '2020-04-30T04:00:00Z' }, { start: '2020-04-30T14:00:00Z', end: '2020-04-30T17:00:00Z' }, { start: '2020-05-01T00:00:00Z', end: '2020-05-01T02:00:00Z' }, { start: '2020-05-01T13:00:00Z', end: '2020-05-01T15:00:00Z' }, { start: '2020-05-01T15:30:00Z', end: '2020-05-01T16:30:00Z' }, { start: '2020-05-01T23:00:00Z', end: '2020-05-02T02:00:00Z' }, { start: '2020-05-02T02:30:00Z', end: '2020-05-02T04:00:00Z' }, { start: '2020-05-02T13:00:00Z', end: '2020-05-02T16:00:00Z' }] },
  '2020-05-03': { available: [{ start: '2020-05-02T16:00:00Z', end: '2020-05-02T17:00:00Z' }, { start: '2020-05-03T14:00:00Z', end: '2020-05-03T15:00:00Z' }, { start: '2020-05-03T17:00:00Z', end: '2020-05-03T18:00:00Z' }, { start: '2020-05-03T23:00:00Z', end: '2020-05-04T02:00:00Z' }, { start: '2020-05-04T03:00:00Z', end: '2020-05-04T04:00:00Z' }, { start: '2020-05-04T13:00:00Z', end: '2020-05-04T18:00:00Z' }, { start: '2020-05-04T23:00:00Z', end: '2020-05-05T00:30:00Z' }, { start: '2020-05-05T03:00:00Z', end: '2020-05-05T04:00:00Z' }, { start: '2020-05-05T15:00:00Z', end: '2020-05-05T17:00:00Z' }, { start: '2020-05-05T23:00:00Z', end: '2020-05-06T00:30:00Z' }, { start: '2020-05-06T01:30:00Z', end: '2020-05-06T02:00:00Z' }, { start: '2020-05-06T03:00:00Z', end: '2020-05-06T04:00:00Z' }, { start: '2020-05-06T16:00:00Z', end: '2020-05-06T18:00:00Z' }, { start: '2020-05-06T23:00:00Z', end: '2020-05-07T04:00:00Z' }, { start: '2020-05-07T13:00:00Z', end: '2020-05-07T14:00:00Z' }, { start: '2020-05-07T17:00:00Z', end: '2020-05-07T18:00:00Z' }, { start: '2020-05-07T23:00:00Z', end: '2020-05-08T00:00:00Z' }, { start: '2020-05-08T17:00:00Z', end: '2020-05-08T18:00:00Z' }, { start: '2020-05-09T03:00:00Z', end: '2020-05-09T04:00:00Z' }, { start: '2020-05-09T13:00:00Z', end: '2020-05-09T14:00:00Z' }, { start: '2020-05-09T16:00:00Z', end: '2020-05-09T17:00:00Z' }], booked: [{ start: '2020-05-02T23:00:00Z', end: '2020-05-03T04:00:00Z' }, { start: '2020-05-03T13:00:00Z', end: '2020-05-03T14:00:00Z' }, { start: '2020-05-03T15:00:00Z', end: '2020-05-03T17:00:00Z' }, { start: '2020-05-04T02:00:00Z', end: '2020-05-04T03:00:00Z' }, { start: '2020-05-05T00:30:00Z', end: '2020-05-05T03:00:00Z' }, { start: '2020-05-05T13:00:00Z', end: '2020-05-05T15:00:00Z' }, { start: '2020-05-05T17:00:00Z', end: '2020-05-05T18:00:00Z' }, { start: '2020-05-06T00:30:00Z', end: '2020-05-06T01:30:00Z' }, { start: '2020-05-06T02:00:00Z', end: '2020-05-06T03:00:00Z' }, { start: '2020-05-06T13:00:00Z', end: '2020-05-06T16:00:00Z' }, { start: '2020-05-07T14:00:00Z', end: '2020-05-07T17:00:00Z' }, { start: '2020-05-08T00:00:00Z', end: '2020-05-08T04:00:00Z' }, { start: '2020-05-08T13:00:00Z', end: '2020-05-08T17:00:00Z' }, { start: '2020-05-08T23:00:00Z', end: '2020-05-09T03:00:00Z' }, { start: '2020-05-09T14:00:00Z', end: '2020-05-09T16:00:00Z' }] },
  '2020-05-10': { available: [{ start: '2020-05-09T16:00:00Z', end: '2020-05-09T18:00:00Z' }, { start: '2020-05-10T00:00:00Z', end: '2020-05-10T01:00:00Z' }, { start: '2020-05-10T02:00:00Z', end: '2020-05-10T02:30:00Z' }, { start: '2020-05-10T03:30:00Z', end: '2020-05-10T04:00:00Z' }, { start: '2020-05-10T14:00:00Z', end: '2020-05-10T17:00:00Z' }, { start: '2020-05-11T00:00:00Z', end: '2020-05-11T04:00:00Z' }, { start: '2020-05-11T13:00:00Z', end: '2020-05-11T18:00:00Z' }, { start: '2020-05-11T23:00:00Z', end: '2020-05-12T01:00:00Z' }, { start: '2020-05-12T03:00:00Z', end: '2020-05-12T04:00:00Z' }, { start: '2020-05-12T13:00:00Z', end: '2020-05-12T14:00:00Z' }, { start: '2020-05-12T15:00:00Z', end: '2020-05-12T18:00:00Z' }, { start: '2020-05-12T23:00:00Z', end: '2020-05-13T02:00:00Z' }, { start: '2020-05-13T15:00:00Z', end: '2020-05-13T18:00:00Z' }, { start: '2020-05-13T23:00:00Z', end: '2020-05-14T04:00:00Z' }, { start: '2020-05-14T13:00:00Z', end: '2020-05-14T14:00:00Z' }, { start: '2020-05-14T15:00:00Z', end: '2020-05-14T18:00:00Z' }, { start: '2020-05-14T23:00:00Z', end: '2020-05-15T04:00:00Z' }, { start: '2020-05-15T14:00:00Z', end: '2020-05-15T15:00:00Z' }, { start: '2020-05-15T16:00:00Z', end: '2020-05-15T18:00:00Z' }, { start: '2020-05-15T23:00:00Z', end: '2020-05-16T00:00:00Z' }, { start: '2020-05-16T01:00:00Z', end: '2020-05-16T02:00:00Z' }, { start: '2020-05-16T13:00:00Z', end: '2020-05-16T17:00:00Z' }], booked: [{ start: '2020-05-09T23:00:00Z', end: '2020-05-10T00:00:00Z' }, { start: '2020-05-10T01:00:00Z', end: '2020-05-10T02:00:00Z' }, { start: '2020-05-10T02:30:00Z', end: '2020-05-10T03:30:00Z' }, { start: '2020-05-10T13:00:00Z', end: '2020-05-10T14:00:00Z' }, { start: '2020-05-12T01:00:00Z', end: '2020-05-12T03:00:00Z' }, { start: '2020-05-12T14:00:00Z', end: '2020-05-12T15:00:00Z' }, { start: '2020-05-13T02:00:00Z', end: '2020-05-13T04:00:00Z' }, { start: '2020-05-13T13:00:00Z', end: '2020-05-13T15:00:00Z' }, { start: '2020-05-14T14:00:00Z', end: '2020-05-14T15:00:00Z' }, { start: '2020-05-15T13:00:00Z', end: '2020-05-15T14:00:00Z' }, { start: '2020-05-15T15:00:00Z', end: '2020-05-15T16:00:00Z' }, { start: '2020-05-16T00:00:00Z', end: '2020-05-16T01:00:00Z' }, { start: '2020-05-16T02:00:00Z', end: '2020-05-16T04:00:00Z' }] },
  '2020-05-17': { available: [{ start: '2020-05-16T16:00:00Z', end: '2020-05-16T18:00:00Z' }, { start: '2020-05-17T01:00:00Z', end: '2020-05-17T02:00:00Z' }, { start: '2020-05-17T03:00:00Z', end: '2020-05-17T04:00:00Z' }, { start: '2020-05-17T14:00:00Z', end: '2020-05-17T14:30:00Z' }, { start: '2020-05-17T15:30:00Z', end: '2020-05-17T18:00:00Z' }, { start: '2020-05-17T23:00:00Z', end: '2020-05-18T02:00:00Z' }, { start: '2020-05-18T03:00:00Z', end: '2020-05-18T04:00:00Z' }, { start: '2020-05-18T13:00:00Z', end: '2020-05-18T18:00:00Z' }, { start: '2020-05-18T23:00:00Z', end: '2020-05-19T04:00:00Z' }, { start: '2020-05-19T13:00:00Z', end: '2020-05-19T14:00:00Z' }, { start: '2020-05-19T15:00:00Z', end: '2020-05-19T18:00:00Z' }, { start: '2020-05-19T23:00:00Z', end: '2020-05-20T04:00:00Z' }, { start: '2020-05-20T15:00:00Z', end: '2020-05-20T18:00:00Z' }, { start: '2020-05-20T23:00:00Z', end: '2020-05-21T04:00:00Z' }, { start: '2020-05-21T13:00:00Z', end: '2020-05-21T14:00:00Z' }, { start: '2020-05-21T16:00:00Z', end: '2020-05-21T18:00:00Z' }, { start: '2020-05-21T23:00:00Z', end: '2020-05-22T04:00:00Z' }, { start: '2020-05-22T13:00:00Z', end: '2020-05-22T15:00:00Z' }, { start: '2020-05-22T16:00:00Z', end: '2020-05-22T18:00:00Z' }, { start: '2020-05-22T23:00:00Z', end: '2020-05-23T00:00:00Z' }, { start: '2020-05-23T03:00:00Z', end: '2020-05-23T04:00:00Z' }, { start: '2020-05-23T13:00:00Z', end: '2020-05-23T14:00:00Z' }, { start: '2020-05-23T15:00:00Z', end: '2020-05-23T17:00:00Z' }], booked: [{ start: '2020-05-16T23:00:00Z', end: '2020-05-17T01:00:00Z' }, { start: '2020-05-17T02:00:00Z', end: '2020-05-17T03:00:00Z' }, { start: '2020-05-17T13:00:00Z', end: '2020-05-17T14:00:00Z' }, { start: '2020-05-17T14:30:00Z', end: '2020-05-17T15:30:00Z' }, { start: '2020-05-18T02:00:00Z', end: '2020-05-18T03:00:00Z' }, { start: '2020-05-19T14:00:00Z', end: '2020-05-19T15:00:00Z' }, { start: '2020-05-20T13:00:00Z', end: '2020-05-20T15:00:00Z' }, { start: '2020-05-21T14:00:00Z', end: '2020-05-21T16:00:00Z' }, { start: '2020-05-22T15:00:00Z', end: '2020-05-22T16:00:00Z' }, { start: '2020-05-23T00:00:00Z', end: '2020-05-23T03:00:00Z' }, { start: '2020-05-23T14:00:00Z', end: '2020-05-23T15:00:00Z' }] },
};

function getFakeSchedule(startedAt) {
  const date = dayjs(startedAt).format('YYYY-MM-DD');

  return fakeSchedules[date] || {
    available: [],
    booked: [],
  };
}

export default function fakeAxios(resource, config) {
  if (process.env.NODE_ENV === 'development') {
    return fetch(`/schedule?started_at=${config.params.started_at}`)
      .then((response) => response.json());
  }

  console.log(`Mock calling api \`/${resource}\` with config:`, JSON.stringify(config));

  const data = getFakeSchedule(config.params.started_at);

  return new Promise((resolve) => {
    setTimeout(() => {
      resolve(data);
    }, 100);
  });
}
